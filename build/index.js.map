{"version":3,"file":"index.js","sources":["../source/index.ts"],"sourcesContent":["import { regex as period } from 'vamtiger-regex-period';\nimport { ReferenceObjectPath } from 'vamtiger-reference-object-path';\n\nconst referenceObjectPath = require('vamtiger-reference-object-path') as ReferenceObjectPath;\n\nconst periodCharacter = '.';\n\nexport default function main({ path: requirePath, instancePath, constructorParams, arguments: args, instanceArguments: instanceArgs }: Params) {\n    const [filePath, ...objectPaths] = requirePath.split(period);\n    const objectPath = objectPaths && objectPaths.join(periodCharacter);\n    const requiredModule = require(filePath);\n    const method = objectPath && referenceObjectPath({\n        object: requiredModule,\n        path: objectPath\n    });\n\n    let result = method || requiredModule;\n    let resultFunction;\n\n    if (constructorParams) {\n        result = new result(constructorParams);\n\n        if (instancePath) {\n            resultFunction = referenceObjectPath({\n                object: result,\n                path: instancePath\n            });\n\n            result = resultFunction.apply(result, instanceArgs || []);\n        }\n    } else if (args && typeof args[args.length - 1] === Type.function)\n        result = result.apply(null, args);\n    else if (args)\n        result = result(args);\n\n    return result;\n}\n\nexport interface Params {\n    path: string;\n    constructorParams?: AnyObject;\n    instancePath?: string;\n    arguments?: any[];\n    instanceArguments?: any[];\n}\n\nexport enum Type {\n    function = 'function'\n}\n\nexport type AnyObject = {\n    [key: string]: any;\n}\n\nexport type VamtigerRequire = typeof main;"],"names":["referenceObjectPath","require","periodCharacter","main","path","requirePath","instancePath","constructorParams","arguments","args","instanceArguments","instanceArgs","filePath","objectPaths","split","period","objectPath","join","requiredModule","resultFunction","result","object","apply","length","Type","function"],"mappings":"6HAGA,MAAMA,oBAAsBC,QAAQ,kCAE9BC,gBAAkB,IAExB,SAAwBC,MAAOC,KAAMC,EAAWC,aAAEA,EAAYC,kBAAEA,EAAmBC,UAAWC,EAAMC,kBAAmBC,IACnH,MAAOC,KAAaC,GAAeR,EAAYS,MAAMC,2BAC/CC,EAAaH,GAAeA,EAAYI,KAAKf,iBAC7CgB,EAAiBjB,QAAQW,GAM/B,IACIO,EADAC,EALWJ,GAAchB,qBACzBqB,OAAQH,EACRd,KAAMY,KAGaE,EAmBvB,OAhBIX,GACAa,EAAS,IAAIA,EAAOb,GAEhBD,IAMAc,GALAD,EAAiBnB,qBACbqB,OAAQD,EACRhB,KAAME,KAGcgB,MAAMF,EAAQT,SAEnCF,UAAeA,EAAKA,EAAKc,OAAS,KAAOC,aAAKC,SACrDL,EAASA,EAAOE,MAAM,KAAMb,GACvBA,IACLW,EAASA,EAAOX,IAEbW,GAWCI,eAAAA"}